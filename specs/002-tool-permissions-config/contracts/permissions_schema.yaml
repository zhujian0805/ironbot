# Permission Configuration File Schema

# JSON Schema for permissions.yaml validation
$schema: "http://json-schema.org/draft-07/schema#"
$id: "https://ironbot.local/schemas/permissions.yaml"
title: Permission Configuration
description: Minimal policy format for controlling tools, commands, skills, MCPs, and resources
type: object

properties:
  tools:
    $ref: "#/definitions/PolicyList"
  mcps:
    $ref: "#/definitions/PolicyList"
  commands:
    $ref: "#/definitions/PolicyList"
  skills:
    $ref: "#/definitions/PolicyList"
  resurces:
    $ref: "#/definitions/PolicyList"

additionalProperties: false

definitions:
  PolicyEntry:
    type: object
    properties:
      priority:
        type: integer
        description: Lower numbers are evaluated first
      name:
        type: string
        description: Regular expression used to match tools, commands, or resource paths
      desc:
        type: string
        description: Human-friendly description of the entry
    required:
      - priority
      - name
      - desc
    additionalProperties: false

  PolicyList:
    type: array
    items:
      $ref: "#/definitions/PolicyEntry"
    description: List of ordered policy entries for a capability section
